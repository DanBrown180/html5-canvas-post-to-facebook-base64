<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script type="text/javascript" src="facebook-canvas.js"></script>
</head>

<body>
    <script type="text/javascript">
        $(document).ready(function () {
            $.ajaxSetup({
                cache: true
            });
            $.getScript('//connect.facebook.net/en_UK/all.js', function () {
                // Load the APP / SDK
                FB.init({
                    appId: '288585397909199', // App ID from the App Dashboard
                    cookie: true, // set sessions cookies to allow your server to access the session?
                    xfbml: true, // parse XFBML tags on this page?
                    frictionlessRequests: true,
                    oauth: true
                });

                FB.login(function (response) {
                    if (response.authResponse) {
                        window.authToken = response.authResponse.accessToken;
                    } else {

                    }
                }, {
                    scope: 'publish_actions,publish_stream'
                });

            });

            // Populate the canvas
            var c = document.getElementById("c");
            var ctx = c.getContext("2d");

            ctx.font = "20px Georgia";
            ctx.fillText("Posted to Facebook", 10, 50);

        });
    </script>
    <div id="fb-root"></div>
    <canvas id="c" width="500" height="500"></canvas>
    <a id="poster" href="#" onclick="PostImageToFacebook(window.authToken)">Post Canvas Image To Facebook</a>
</body>

</html>